---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { articles, categoryInfo, getFeaturedArticles } from '../../data/articles';

const title = "Motorcycle Accident Blog - Legal Guides, Safety Tips & Injury Information";
const description = "Expert articles on motorcycle accident law, common injuries, safety tips, and how to maximize your claim. Free resources from experienced motorcycle accident attorneys.";

const featured = getFeaturedArticles().slice(0, 3);
const categories = Object.entries(categoryInfo);

// Group articles by category for display
const articlesByCategory = {
  'accident-types': articles.filter(a => a.category === 'accident-types').slice(0, 6),
  'injuries': articles.filter(a => a.category === 'injuries').slice(0, 6),
  'legal': articles.filter(a => a.category === 'legal').slice(0, 6),
  'safety': articles.filter(a => a.category === 'safety').slice(0, 6),
  'claims': articles.filter(a => a.category === 'claims').slice(0, 6),
};

// Recent articles
const recentArticles = [...articles]
  .sort((a, b) => new Date(b.publishDate).getTime() - new Date(a.publishDate).getTime())
  .slice(0, 6);

const schemaMarkup = {
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Motorcycle Wreck Law Blog",
  "description": description,
  "url": "https://motorcyclewrecklaw.com/blog",
  "publisher": {
    "@type": "Organization",
    "name": "Motorcycle Wreck Law",
    "logo": {
      "@type": "ImageObject",
      "url": "https://motorcyclewrecklaw.com/images/logo.png"
    }
  }
};

const breadcrumbs = [
  { name: "Home", url: "/" },
  { name: "Blog", url: "/blog" }
];
---

<BaseLayout 
  title={title} 
  description={description}
  schemaMarkup={schemaMarkup}
  breadcrumbs={breadcrumbs}
>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white py-16 md:py-20">
    <div class="container-wide">
      <div class="max-w-4xl">
        <div class="flex items-center gap-2 text-gray-400 mb-4">
          <a href="/" class="hover:text-white transition">Home</a>
          <span>/</span>
          <span class="text-white">Blog</span>
        </div>
        
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6">
          Motorcycle Accident <span class="text-primary-400">Resource Center</span>
        </h1>
        
        <p class="text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed">
          Expert guides on motorcycle accident law, common injuries, safety strategies, and 
          how to protect your legal rights. Written by attorneys who ride.
        </p>
        
        <div class="flex flex-wrap gap-3">
          {categories.map(([key, info]) => (
            <a 
              href={`#${key}`}
              class="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg text-sm font-medium transition"
            >
              {info.icon} {info.name}
            </a>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Articles -->
  <section class="py-12 md:py-16 bg-white">
    <div class="container-wide">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-900">
          ‚≠ê Featured Articles
        </h2>
      </div>
      
      <div class="grid md:grid-cols-3 gap-6">
        {featured.map((article, index) => (
          <a 
            href={`/blog/${article.slug}`}
            class={`group bg-gradient-to-br rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition ${
              index === 0 ? 'from-primary-600 to-primary-700 md:col-span-2 md:row-span-2' : 'from-gray-800 to-gray-900'
            }`}
          >
            <div class={`p-6 md:p-8 h-full flex flex-col ${index === 0 ? 'justify-end min-h-[300px] md:min-h-[400px]' : ''}`}>
              <span class={`text-xs font-semibold uppercase tracking-wider ${index === 0 ? 'text-primary-200' : 'text-gray-400'}`}>
                {article.categoryLabel}
              </span>
              <h3 class={`font-bold text-white mt-2 group-hover:text-primary-200 transition ${index === 0 ? 'text-2xl md:text-3xl' : 'text-lg'}`}>
                {article.title}
              </h3>
              <p class={`mt-3 ${index === 0 ? 'text-primary-100' : 'text-gray-300'} line-clamp-3`}>
                {article.excerpt}
              </p>
              <div class={`mt-4 flex items-center gap-4 text-sm ${index === 0 ? 'text-primary-200' : 'text-gray-400'}`}>
                <span>{article.readTime} min read</span>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Recent Articles -->
  <section class="py-12 md:py-16 bg-gray-50">
    <div class="container-wide">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-8">
        üì∞ Latest Articles
      </h2>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {recentArticles.map(article => (
          <a 
            href={`/blog/${article.slug}`}
            class="group bg-white rounded-xl shadow-md hover:shadow-lg transition overflow-hidden"
          >
            <div class="p-6">
              <div class="flex items-center gap-2 mb-3">
                <span class="text-xs font-semibold text-primary-600 bg-primary-50 px-2 py-1 rounded">
                  {article.categoryLabel}
                </span>
                <span class="text-xs text-gray-400">{article.readTime} min</span>
              </div>
              <h3 class="text-lg font-bold text-gray-900 group-hover:text-primary-600 transition line-clamp-2">
                {article.title}
              </h3>
              <p class="text-gray-600 text-sm mt-2 line-clamp-2">
                {article.excerpt}
              </p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Category Sections -->
  {categories.map(([key, info]) => (
    <section id={key} class="py-12 md:py-16 even:bg-gray-50">
      <div class="container-wide">
        <div class="flex items-center justify-between mb-8">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold text-gray-900">
              {info.icon} {info.name}
            </h2>
            <p class="text-gray-600 mt-2">{info.description}</p>
          </div>
          <a 
            href={`/blog/category/${key}`}
            class="hidden md:block text-primary-600 hover:text-primary-700 font-semibold"
          >
            View All ‚Üí
          </a>
        </div>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {articlesByCategory[key as keyof typeof articlesByCategory].map(article => (
            <a 
              href={`/blog/${article.slug}`}
              class="group bg-white rounded-xl shadow-md hover:shadow-lg transition p-6"
            >
              <h3 class="text-lg font-bold text-gray-900 group-hover:text-primary-600 transition line-clamp-2">
                {article.title}
              </h3>
              <p class="text-gray-600 text-sm mt-2 line-clamp-2">
                {article.excerpt}
              </p>
              <div class="mt-4 flex items-center justify-between text-sm">
                <span class="text-primary-600 font-medium group-hover:underline">
                  Read More ‚Üí
                </span>
                <span class="text-gray-400">{article.readTime} min</span>
              </div>
            </a>
          ))}
        </div>
        
        <div class="mt-6 text-center md:hidden">
          <a 
            href={`/blog/category/${key}`}
            class="text-primary-600 hover:text-primary-700 font-semibold"
          >
            View All {info.name} Articles ‚Üí
          </a>
        </div>
      </div>
    </section>
  ))}

  <!-- Free Case Review CTA -->
  <section class="bg-gradient-to-br from-primary-600 to-primary-700 text-white py-12 md:py-16">
    <div class="container-wide">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          Injured in a Motorcycle Accident?
        </h2>
        <p class="text-xl text-primary-100 mb-8">
          Our articles provide general information, but every case is unique. 
          Get personalized advice with a free case evaluation.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a href="/#free-case-review" class="btn bg-white text-primary-700 hover:bg-gray-100 text-lg px-8 py-4">
            Get Your Free Case Review
          </a>
          </div>
      </div>
    </div>
  </section>

  <!-- All Articles List -->
  <section class="py-12 md:py-16">
    <div class="container-wide">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-8">
        üìö All {articles.length} Articles
      </h2>
      
      <div class="grid md:grid-cols-2 gap-4">
        {articles.map(article => (
          <a 
            href={`/blog/${article.slug}`}
            class="group flex items-start gap-4 p-4 rounded-lg hover:bg-gray-50 transition"
          >
            <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <span class="text-xl">{categoryInfo[article.category].icon}</span>
            </div>
            <div class="min-w-0">
              <h3 class="font-semibold text-gray-900 group-hover:text-primary-600 transition line-clamp-1">
                {article.title}
              </h3>
              <p class="text-sm text-gray-500 mt-1">
                {article.categoryLabel} ‚Ä¢ {article.readTime} min read
              </p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
